<?xml version="1.0" encoding="UTF-8"?>
<!-- (c) 2024 Copyright, Real-Time Innovations, Inc. (RTI) All rights reserved.

RTI grants Licensee a license to use, modify, compile, and create derivative
works of the software solely for use with RTI Connext DDS.  Licensee may
redistribute copies of the software provided that all such copies are
subject to this license. The software is provided "as is", with no warranty
of any type, including any warranty for fitness for any purpose. RTI is
under no obligation to maintain or support the software.  RTI shall not be
liable for any incidental or consequential damages arising out of the use or
inability to use the software. -->
<dds xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://community.rti.com/schema/7.3.0/rti_dds_profiles.xsd" version="7.3.0">

  <configuration_variables>
    <value>
      <element>
        <!-- Path to security folder to find artifacts.
              This path is relative to the "current working directory" when
              running the application (i.e. from the `modules` folder).
              It can be overridden by setting the RTI_SECURITY_ARTIFACTS_DIR
              environment variable.
        -->
        <name>RTI_SECURITY_ARTIFACTS_DIR</name>
        <value>../../system_arch/security</value>
      </element>
    </value>
  </configuration_variables>

  <qos_library name="CommonLibrary">
    <qos_profile name="CommonSecurityConfig">
      <?rti-qos_snippet?>
      <domain_participant_qos>
        <base_name>
          <element>BuiltinQosSnippetLib::Feature.Security.Enable</element>
        </base_name>
        <property>
          <value>
            <!-- For these modules, we only use 1 permissions CA -->
            <element>
              <name>dds.sec.access.permissions_ca</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/ca/CaIdentity.pem</value>
            </element>
            <!-- For these modules, we only use 1 CA -->
            <element>
              <name>dds.sec.auth.identity_ca</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/ca/CaIdentity.pem</value>
            </element>
          </value>
        </property>
      </domain_participant_qos>
    </qos_profile>

    <!-- "Local" (LAN) connections for these modules are only on Domain 0. -->
    <qos_profile name="LanCommonSecurityConfig" base_name="CommonSecurityConfig">
      <?rti-qos_snippet?>
      <domain_participant_qos>
        <property>
          <value>
            <!-- For these modules, we only use 1 governance file per domain -->
            <element>
              <name>dds.sec.access.governance</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/xml/signed/SignedGovernanceDomain0.p7s</value>
            </element>
          </value>
        </property>
      </domain_participant_qos>
    </qos_profile>

    <!-- "Remote" (WAN) connections for these modules are only on Domain 1. -->
    <qos_profile name="WanCommonSecurityConfig" base_name="CommonSecurityConfig">
      <?rti-qos_snippet?>
      <domain_participant_qos>
        <property>
          <value>
            <!-- For these modules, we only use 1 governance file per domain -->
            <element>
              <name>dds.sec.access.governance</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/xml/signed/SignedGovernanceDomain1.p7s</value>
            </element>
          </value>
        </property>
      </domain_participant_qos>
    </qos_profile>
  </qos_library>

  <qos_library name="DpQosLib">

    <qos_profile name="Arm" base_name="SystemLibrary::DefaultParticipant">
      <domain_participant_qos>
        <base_name>
          <element>CommonLibrary::LanCommonSecurityConfig</element>
        </base_name>
        <property>
          <value>
            <element>
              <name>dds.sec.auth.identity_certificate</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/01-operating-room/Arm/ArmIdentity.pem</value>
            </element>
            <element>
              <name>dds.sec.auth.private_key</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/01-operating-room/Arm/ArmPrivateKey.pem</value>
            </element>
            <element>
              <name>dds.sec.access.permissions</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/xml/signed/SignedPermissionsArm.p7s</value>
            </element>
          </value>
        </property>
      </domain_participant_qos>
    </qos_profile>

    <qos_profile name="ArmController" base_name="SystemLibrary::DefaultParticipant">
      <domain_participant_qos>
        <base_name>
          <element>CommonLibrary::LanCommonSecurityConfig</element>
        </base_name>
        <property>
          <value>
            <element>
              <name>dds.sec.auth.identity_certificate</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/01-operating-room/ArmController/ArmControllerIdentity.pem</value>
            </element>
            <element>
              <name>dds.sec.auth.private_key</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/01-operating-room/ArmController/ArmControllerPrivateKey.pem</value>
            </element>
            <element>
              <name>dds.sec.access.permissions</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/xml/signed/SignedPermissionsArmController.p7s</value>
            </element>
          </value>
        </property>
      </domain_participant_qos>
    </qos_profile>

    <qos_profile name="Orchestrator" base_name="SystemLibrary::DefaultParticipant">
      <domain_participant_qos>
        <base_name>
          <element>CommonLibrary::LanCommonSecurityConfig</element>
        </base_name>
        <property>
          <value>
            <element>
              <name>dds.sec.auth.identity_certificate</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/01-operating-room/Orchestrator/OrchestratorIdentity.pem</value>
            </element>
            <element>
              <name>dds.sec.auth.private_key</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/01-operating-room/Orchestrator/OrchestratorPrivateKey.pem</value>
            </element>
            <element>
              <name>dds.sec.access.permissions</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/xml/signed/SignedPermissionsOrchestrator.p7s</value>
            </element>
          </value>
        </property>
      </domain_participant_qos>
    </qos_profile>

    <qos_profile name="PatientSensor" base_name="SystemLibrary::DefaultParticipant">
      <domain_participant_qos>
        <base_name>
          <element>CommonLibrary::LanCommonSecurityConfig</element>
        </base_name>
        <property>
          <value>
            <element>
              <name>dds.sec.auth.identity_certificate</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/01-operating-room/PatientSensor/PatientSensorIdentity.pem</value>
            </element>
            <element>
              <name>dds.sec.auth.private_key</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/01-operating-room/PatientSensor/PatientSensorPrivateKey.pem</value>
            </element>
            <element>
              <name>dds.sec.access.permissions</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/xml/signed/SignedPermissionsPatientSensor.p7s</value>
            </element>
          </value>
        </property>
      </domain_participant_qos>
    </qos_profile>
    <qos_profile name="PatientMonitor" base_name="SystemLibrary::DefaultParticipant">
      <domain_participant_qos>
        <base_name>
          <element>CommonLibrary::LanCommonSecurityConfig</element>
        </base_name>
        <property>
          <value>
            <element>
              <name>dds.sec.auth.identity_certificate</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/01-operating-room/PatientMonitor/PatientMonitorIdentity.pem</value>
            </element>
            <element>
              <name>dds.sec.auth.private_key</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/01-operating-room/PatientMonitor/PatientMonitorPrivateKey.pem</value>
            </element>
            <element>
              <name>dds.sec.access.permissions</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/xml/signed/SignedPermissionsPatientMonitor.p7s</value>
            </element>
          </value>
        </property>
      </domain_participant_qos>
    </qos_profile>
  </qos_library>

  <qos_library name="RtiServicesLib">
    <qos_profile name="RecordingService" base_name="SystemLibrary::DefaultParticipant">
      <domain_participant_qos>
        <base_name>
          <element>CommonLibrary::LanCommonSecurityConfig</element>
        </base_name>
        <property>
          <value>
            <element>
              <name>dds.sec.auth.identity_certificate</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/02-record-playback/RecordingService/RecordingServiceIdentity.pem</value>
            </element>
            <element>
              <name>dds.sec.auth.private_key</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/02-record-playback/RecordingService/RecordingServicePrivateKey.pem</value>
            </element>
            <element>
              <name>dds.sec.access.permissions</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/xml/signed/SignedPermissionsRecordingService.p7s</value>
            </element>
          </value>
        </property>
      </domain_participant_qos>
    </qos_profile>
    <qos_profile name="ReplayService" base_name="SystemLibrary::DefaultParticipant">
      <domain_participant_qos>
        <base_name>
          <element>CommonLibrary::LanCommonSecurityConfig</element>
        </base_name>
        <property>
          <value>
            <element>
              <name>dds.sec.auth.identity_certificate</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/02-record-playback/ReplayService/ReplayServiceIdentity.pem</value>
            </element>
            <element>
              <name>dds.sec.auth.private_key</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/02-record-playback/ReplayService/ReplayServicePrivateKey.pem</value>
            </element>
            <element>
              <name>dds.sec.access.permissions</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/xml/signed/SignedPermissionsReplayService.p7s</value>
            </element>
          </value>
        </property>
      </domain_participant_qos>
    </qos_profile>

    <qos_profile name="RsActive" base_name="BuiltinQosLib::Generic.Common">
      <domain_participant_qos>
        <base_name>
          <element>SystemLibrary::WanConfig</element>
          <element>CommonLibrary::WanCommonSecurityConfig</element>
        </base_name>
        <property>
          <value>
            <element>
              <name>dds.sec.auth.identity_certificate</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/03-remote-teleoperation/RsActive/RsActiveIdentity.pem</value>
            </element>
            <element>
              <name>dds.sec.auth.private_key</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/03-remote-teleoperation/RsActive/RsActivePrivateKey.pem</value>
            </element>
            <element>
              <name>dds.sec.access.permissions</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/xml/signed/SignedPermissionsRsActive.p7s</value>
            </element>
          </value>
        </property>
      </domain_participant_qos>
    </qos_profile>
    <qos_profile name="RsPassive" base_name="BuiltinQosLib::Generic.Common">
      <domain_participant_qos>
        <base_name>
          <element>SystemLibrary::WanConfig</element>
          <element>CommonLibrary::WanCommonSecurityConfig</element>
        </base_name>
        <property>
          <value>
            <element>
              <name>dds.sec.auth.identity_certificate</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/03-remote-teleoperation/RsPassive/RsPassiveIdentity.pem</value>
            </element>
            <element>
              <name>dds.sec.auth.private_key</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/03-remote-teleoperation/RsPassive/RsPassivePrivateKey.pem</value>
            </element>
            <element>
              <name>dds.sec.access.permissions</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/xml/signed/SignedPermissionsRsPassive.p7s</value>
            </element>
          </value>
        </property>
      </domain_participant_qos>
    </qos_profile>
    <qos_profile name="RsCloud" base_name="BuiltinQosLib::Generic.Common">
      <domain_participant_qos>
        <base_name>
          <element>SystemLibrary::WanConfig</element>
          <element>CommonLibrary::WanCommonSecurityConfig</element>
        </base_name>
        <property>
          <value>
            <element>
              <name>dds.sec.auth.identity_certificate</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/03-remote-teleoperation/RsCloud/RsCloudIdentity.pem</value>
            </element>
            <element>
              <name>dds.sec.auth.private_key</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/identities/03-remote-teleoperation/RsCloud/RsCloudPrivateKey.pem</value>
            </element>
            <element>
              <name>dds.sec.access.permissions</name>
              <value>file:$(RTI_SECURITY_ARTIFACTS_DIR)/xml/signed/SignedPermissionsRsCloud.p7s</value>
            </element>
          </value>
        </property>
      </domain_participant_qos>
    </qos_profile>
  </qos_library>

</dds>